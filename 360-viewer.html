<!DOCTYPE html>
<html>
<head>
    <title>360 Picture Viewer</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
</head>
<body>
    <a-scene webxr>
        <!-- This scene will display the 360-degree picture -->
    </a-scene>

    <!-- Input element to select a 360-degree picture -->
    <input type="file" id="fileInput" accept="image/*" style="position: absolute; top: 10px; left: 10px; z-index: 10;">

    <script>
        // Get references to the A-Frame scene and file input elements
        const scene = document.querySelector('a-scene');
        const fileInput = document.getElementById('fileInput');

        // Event listener for file selection
        fileInput.addEventListener('change', function(event) {
            // Get the selected file
            const file = event.target.files[0];

            if (file) {
                // Create a FileReader instance
                const reader = new FileReader();

                // Define what to do when the file is read
                reader.onload = function(event) {
                    // Get the data URL from the FileReader
                    const dataURL = event.target.result;

                    // Create a new a-sky element
                    let sky = document.querySelector('a-sky');
                    if (sky) {
                        sky.parentNode.removeChild(sky); // Remove existing a-sky
                    }
                    sky = document.createElement('a-sky');

                    // Set the src attribute to the data URL
                    sky.setAttribute('src', dataURL);

                    // Append the new a-sky element to the scene
                    scene.appendChild(sky);
                    document.querySelector('a-scene').enterVR();
                };

                // Define what to do in case of an error reading the file
                reader.onerror = function() {
                    console.error("Error reading the file. Please try a different file.");
                };

                // Read the file as a data URL
                reader.readAsDataURL(file);
            }
        });
    </script>
</body>
</html>